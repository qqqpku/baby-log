# 宝宝成长记录 (Baby Growth Log)

一个简洁实用的宝宝日常记录应用，帮助父母轻松记录和追踪宝宝的成长数据。

## 功能特性

### 📊 基本信息
- **日期选择**：记录每日数据
- **身高体重**：自动填充上次数据，显示最后更新时间
- **精神状态**：记录宝宝的情绪和状态

### 🍼 喂养记录
- **母乳喂养**：记录左右两侧时长（分钟）
- **配方奶**：记录奶量（ml）
- **辅食**：记录食物种类和时间
- **自动统计**：实时计算总母乳时长和总配方奶量

### 😴 睡眠记录
- 记录多个睡眠时段（起止时间）
- 自动计算总睡眠时长

### 💩 大便记录
- 记录时间和性状/颜色备注

### 💊 补剂与护理
**补剂**：AD、D3、DHA、钙、铁、益生菌、乳糖酶  
**日常护理**：洗手、洗脸、洗澡、剪指甲、口腔清洁、鼻腔清洁、牙齿清洁、游泳

### 🧠 早教/锻炼
- **大动作**：坐、站、爬、走
- **精细动作**：抓握、传递、对捏、推拉
- **语言社交**：发音练习、语言理解、互动交流

### 📝 历史记录
- 查看所有历史记录
- 展开查看详细信息
- 删除不需要的记录（带确认提示）

### 🎯 智能功能
- **时间自动填充**：新建记录时自动复制上一条记录的喂养和睡眠时间
- **数据持久化**：自动保存到本地文件
- **自动备份**：服务器启动时自动备份数据

## 技术栈

- **前端**：React 19 + Vite
- **后端**：Express.js
- **数据存储**：JSON 文件
- **样式**：原生 CSS

## 安装与运行

### 安装依赖
```bash
npm install
```

### 启动开发服务器
```bash
npm run dev
```

这将同时启动：
- 后端服务器：`http://localhost:3001`
- 前端应用：`http://localhost:5173`（如果端口被占用会自动选择其他端口）

### 构建生产版本
```bash
npm run build
```

## 项目结构

```
baby-log/
├── data/                    # 数据存储目录
│   ├── logs.json           # 主数据文件
│   └── logs.backup.json    # 自动备份文件
├── src/
│   ├── components/
│   │   ├── DailyLogForm.jsx    # 日志表单组件
│   │   └── LogHistory.jsx      # 历史记录组件
│   ├── utils/
│   │   └── schema.js           # 数据规范化工具
│   ├── App.jsx                 # 主应用组件
│   ├── index.css              # 全局样式
│   └── main.jsx               # 应用入口
├── server.js               # Express 后端服务器
├── package.json
└── README.md
```

## API 接口

### 获取所有记录
```
GET /api/logs
```

### 创建新记录
```
POST /api/logs
Content-Type: application/json

{
  "date": "2025-11-25",
  "stats": { ... },
  "feedings": [ ... ],
  ...
}
```

### 删除记录
```
DELETE /api/logs/:id
```

## 数据管理

### 数据备份
- 服务器每次启动时自动创建 `data/logs.backup.json` 备份
- 建议定期手动备份 `data/logs.json` 文件

### 数据恢复
如果数据意外丢失，可以从 `data/logs.backup.json` 恢复：
```bash
cp data/logs.backup.json data/logs.json
```

### 测试数据分离
如果需要区分测试数据和正式数据：
1. 重命名当前数据文件：`mv data/logs.json data/logs_test.json`
2. 重启服务器，会自动创建新的空白 `logs.json`

## 使用建议

1. **每日记录**：建议每天晚上统一记录当天数据
2. **时间规律**：利用自动填充功能，只需修改变化的时间
3. **定期备份**：重要数据建议每周手动备份一次
4. **身高体重**：不必每天测量，系统会自动保留上次数据

## 注意事项

- 数据文件 `data/*.json` 已添加到 `.gitignore`，不会被 git 追踪
- 删除记录前会弹出确认对话框，但删除后无法恢复（除非从备份恢复）
- 建议在正式使用前先创建几条测试记录熟悉功能

## 开发说明

### 添加新字段
1. 修改 `src/components/DailyLogForm.jsx` 中的 `DEFAULT_LOG_SCHEMA`
2. 在表单中添加对应的输入组件
3. 如需在历史记录中显示，修改 `src/components/LogHistory.jsx`

### 修改样式
全局样式定义在 `src/index.css` 中，使用 CSS 变量方便统一调整。

## License

MIT
